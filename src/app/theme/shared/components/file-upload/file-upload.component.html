<div class="file-upload-wrapper">
  <!-- Square File Input with Background Image -->
  <div class="file-upload-square" 
       [style.background-image]="uploadedFileId ? 'url(' + getFileUrl(uploadedFileId) + ')' : 'none'"
       [class.has-image]="uploadedFileId">
    
    <!-- File Input Overlay -->
    <input 
      type="file" 
      class="file-input-overlay"
      [accept]="getAcceptedTypes()"
      (change)="onFileSelected($event)"
      [disabled]="isUploading">
    
    <!-- Upload Content (when no image) -->
    <div class="upload-content" *ngIf="!uploadedFileId && !isUploading">
      <i class="ti ti-cloud-upload upload-icon"></i>
      <small class="upload-text">Upload Image</small>
    </div>
    
    <!-- Upload Progress -->
    <div class="upload-progress" *ngIf="isUploading">
      <div class="spinner-border spinner-border-sm" role="status">
        <span class="visually-hidden">Uploading...</span>
      </div>
    </div>
    
    <!-- Remove Button -->
    <button 
      class="btn-remove" 
      type="button" 
      (click)="removeFile()"
      *ngIf="uploadedFileId && !isUploading">
      <i class="ti ti-x"></i>
    </button>
  </div>

  <!-- Error Message -->
  <div class="alert alert-danger mt-2" *ngIf="errorMessage">
    <small>{{ errorMessage }}</small>
  </div>
</div>